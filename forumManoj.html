<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Our Modules | Forum</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<style>
    .navicon {
        height: 50px;
        width: 50px;
        padding-bottom: 5px;
    }

    .sectionicon {
        width: 25px;
        height: 25px;
    }

    .warningicon {
        width: 35px;
        height: 35px;
    }

    .favorite-btn.active {
        color: #ffc107;
    }

    .cursor-pointer {
        cursor: pointer;
    }

    .no-results {
        display: none;
        padding: 20px;
        text-align: center;
        background-color: #f8d7da;
        border-radius: 4px;
        margin-bottom: 20px;
    }

    .exit {
        font-size: medium;
        padding-left: 10px;
        padding-right: 10px;
        font-family: Arial, Helvetica, sans-serif;
    }

    .star {
        max-height: 25px;
        max-width: 25px;
        object-fit: cover;
    }
</style>

<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-1">
                <ul class="nav flex-column sticky-top text-center">
                    <button class="btn" style="height: 30px; visibility: hidden;"></button>
                    <button class="btn btn-primary my-2" onClick="location.href = 'index.html'">
                        <img src="img/homeicon.png" class="navicon">
                        <p class="mb-0">Home</p>
                    </button>
                    <button class="btn btn-primary my-2" onClick="location.href = 'forum.html'">
                        <img src="img/forum.png" class="navicon">
                        <p class="mb-0">Forum</p>
                    </button>
                    <button class="btn btn-primary my-2" onClick="location.href = 'course-search.html'">
                        <img src="img/courses.jpg" class="navicon">
                        <p class="mb-0">Course Search</p>
                    </button>
                    <button class="btn btn-primary my-2">
                        <img src="img/ai.png" class="navicon">
                        <p class="mb-0">MOM AI</p>
                    </button>
                    <button class="btn btn-primary my-2" onClick="location.href = 'bench.html'">
                        <img src="img/timetable.png" class="navicon">
                        <p class="mb-0">Projection</p>
                    </button>
                </ul>
            </div>

            <!-- Main Content -->
            <!-- Main Forum Content -->
            <div class="col-lg-11">
                <div class="container-fluid py-4 mt-3">
                    <h1 class="display-5">Forum</h1>
                    <div class="row">
                        <!-- Sidebar with Recent and Favorites -->
                        <div class="col-md-3">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Recently Viewed</h5>
                                </div>
                                <div class="list-group list-group-flush" id="recentlyViewed">
                                    <!-- Recently viewed posts will be added here -->
                                    <!-- <div class="card">
                                        <div class="card-body fw-bold">
                                            <img src="img/favourite3.png" alt="favourite" class="star">
                                            Getting Started with Web Development - Joey Tan 
                                        </div>
                                    </div>
                                    <div class="card"></div>
                                        <div class="card-body fw-bold">
                                            <img src="img/nonfavourite.jpg" alt="nonfavourite" class="star">
                                            Best Practices for Code Organization - Leroy Lim 
                                        </div>
                                    </div> -->
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Favorites</h5>
                                </div>
                                <div class="list-group list-group-flush" id="favorites">
                                    <!-- Favorited posts will be added here -->
                                    <div class="card">
                                        <div class="card-body fw-bold d-flex flex-row">
                                            <img src="img/favourite3.png" alt="favourite" class="star me-2">
                                            Taking CS103 in Y1S1 - Joey Tan
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Main Forum Page -->
                        <div class="col-md-9">
                            <div id="forumPage">
                                <!-- Header with Create Post Button -->
                                <div class="d-flex justify-content-between align-items-center mb-4">

                                    <button class="btn btn-primary" data-bs-toggle="modal"
                                        data-bs-target="#createPostModal">
                                        <i class="fas fa-plus me-2"></i>Create Post
                                    </button>
                                    <button class="btn btn-secondary" onClick="location.href='profProfileA.html'">
                                        ← To Professor Profile Page
                                    </button>
                                </div>

                                <!-- Headers -->
                                <div class="row mb-1">
                                    <h5 class="col-md-4"></h5>
                                    <h5 class="col-md-2">Categories</h5>
                                    <h5 class="col-md-2">Professors</h5>
                                    <h5 class="col-md-2">Courses</h5>
                                    <h5 class="col-md-2">Filter By</h5>
                                </div>
                                <!-- Search and Filters -->
                                <div class="row mb-2">
                                    <div class="col-md-4">
                                        <div class="input-group mb-3">
                                            <input type="text" class="form-control" placeholder="Search forums...">
                                            <button class="btn btn-outline-success">Search</button>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select form-select-md" id="categoryFilter">
                                            <option value="all">All Categories</option>
                                            <option value="professor">Professor</option>
                                            <option value="question">Question</option>
                                            <option value="course">Course</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select form-select-md" id="categoryFilter">
                                            <option value="all">All Professors</option>
                                            <option value="manoj" selected>Manoj Thulasidas</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select form-select-md" id="categoryFilter">
                                            <option value="all" selected>All Courses</option>
                                            <option value="CS103">CS103</option>
                                            <option value="IS113">IS113</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select form-select-md" id="sortBy">
                                            <option value="newest">Newest First</option>
                                            <option value="popular">Most Popular</option>
                                            <option value="commented">Most Commented</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- No Results Message -->
                                <div id="noResults" class="no-results">
                                    <i class="fas fa-search me-2"></i>
                                    No forums found matching your search criteria
                                </div>

                                <!-- Professor Rating Container -->
                                <div class="container-fluid " id="professorRating">
                                    <div class="row mb-3 align-middle">
                                        <div class="col-xl-3 text-center">
                                            <img src="img/manojt.jpg" class="object-fit-cover mt-2 img-fluid"
                                                style="width: 200px; height: 200px;">
                                        </div>
                                        <div class="col-xl-9 ">
                                            <div class="mt-3 text-center">
                                                <h2 class="mb-3">Professor Manoj Thulasidas</h2>
                                                <h3>Forum Score: ⭐⭐⭐⭐⭐</h3>
                                            </div>
                                            <div class="row justify-content-between fw-bolder text-center align-items-center mt-3 fs-5">
                                                <div class="col border-end" style="color: rgb(209, 25, 209);">
                                                    Engaging
                                                    <p>76%</p>
                                                </div>
                                                <div class="col border-end" style="color: violet;">
                                                    Fair Grading
                                                    <p>86%</p>
                                                </div>
                                                <div class="col border-end" style="color: rgb(255, 123, 145);">
                                                    Knowledgable
                                                    <p>93%</p>
                                                </div>
                                                <div class="col border-end" style="color: orange;">
                                                    Effective Teaching
                                                    <p>86%</p>
                                                </div>
                                                <div class="col" style="color: rgb(21, 193, 21);">
                                                    Manageable Workload
                                                    <p>76%</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>

                                <!-- Posts Container -->
                                <div id="postsContainer">
                                    <!-- Posts will be dynamically inserted here -->
                                </div>
                            </div>

                            <!-- Post Detail Page -->
                            <div id="postDetailPage" style="display: none;">
                                <div class="mb-4">
                                    <button class="btn btn-secondary" onclick="showForumPage()">
                                        <i class="fas fa-arrow-left me-2"></i>Back to Forum
                                    </button>
                                </div>
                                <div id="postDetailContent">
                                    <!-- Post detail will be dynamically inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Create Post Modal -->
    <div class="modal fade" id="createPostModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createPostForm">
                        <div class="mb-3">
                            <label class="form-label">Title</label>
                            <input type="text" class="form-control" id="postTitle" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Category</label>
                            <select class="form-select" id="postCategory" required>
                                <option value="professor">Professor</option>
                                <option value="question">Question</option>
                                <option value="course">Course</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Content</label>
                            <textarea class="form-control" id="postContent" rows="4" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Image</label>
                            <input type="file" class="form-control" id="postImage" accept="image/*">
                        </div>
                        <button type="submit" class="btn btn-primary">Create Post</button>
                    </form>
                </div>
            </div>
        </div>
    </div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample posts data with full content
        let posts = [
            {
                id: 1,
                title: "Taking CS103 in Y1S1",
                favourite: "img/favourite3.png",
                category: "Course",
                content: "I think this is one of the harder mods for comp sci students in Y1S1. It is quite difficult to get everything taught even during finals. Our final paper is quite decent, but that's after some killer quizzes and mid-term (I'm guessing that they probably made the finals easier for us after the initial tough tests, but I'm not sure about future batches - maybe they will average out the difficulty levels across all the tests for yall). Anyway, I would say not to worry about getting excellent grades for this mod because if you put in the necessary effort (tho prob more than other mods), getting an A- should still be achievable. It is an important mod especially for comp science students too. You can watch Gilbert Strang's videos on YouTube if you don't get anything too lol.",
                author: "Joey Tan",
                timestamp: "2 hours ago",
                likes: 42,
                comments: [
                    { author: "Johnathan Tan", content: "Oh no, do you have any tips for this module.", timestamp: "1 hour ago" },
                    { author: "Samantha Lee", content: "What module would you recommend taking together with this module?", timestamp: "30 minutes ago" }
                ],
                image: "img/usericon.jpg"
            },
            {
                id: 2,
                title: "My experience with Professor Manoj Thulasidas for CS103",
                favourite: "img/nonfavourite.jpg",
                category: "Professor",
                content: "I had Prof Manoj for Linear Algebra, and I understand that the content is really dry and difficult to teach. Despite this, I can tell that he really cares and tries his best to engage us. The assignments were very manageable, and he provided many opportunities for us to participate in class discussion.",
                author: "Leroy Lim",
                timestamp: "5 hours ago",
                likes: 28,
                comments: [
                    { author: "Melissa Sim", content: "I agree! Professor Manoj is really good.", timestamp: "4 hours ago" },
                    { author: "Sarah Chong", content: "Did not regret choosing him.", timestamp: "3 hours ago" }
                ],
                image: "img/usericon.jpg"
            }
        ];

        // Function to create post card HTML for main page
        function createPostElement(post) {
            return `
                <div class="card mb-4 cursor-pointer" onclick="showPostDetail(${post.id})">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <img src="${post.image}" class="img-fluid rounded" alt="Post image">
                            </div>
                            <div class="col-md-9">
                                <h5 class="card-title">${post.title} <span><img src="${post.favourite}" class="img-fluid rounded star mb-2" alt="Post image"></span></h5>
                                <h6 class="card-subtitle mb-2 text-muted">
                                    <span class="badge bg-secondary">${post.category}</span>
                                    · Posted by ${post.author} · ${post.timestamp}
                                </h6>
                                <p class="card-text">${post.content.substring(0, 150)}...</p>
                                <div class="d-flex gap-3">
                                    <button class="btn btn-outline-primary btn-sm" onclick="event.stopPropagation()">
                                        <i class="fas fa-thumbs-up me-1"></i>${post.likes}
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm" onclick="event.stopPropagation()">
                                        <i class="fas fa-comment me-1"></i>${post.comments.length} 
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to create post detail HTML
        function createPostDetailElement(post) {
            const commentsHtml = post.comments.map(comment => `
                <div class="card mb-2">
                    <div class="card-body">
                        <h6 class="card-subtitle mb-2 text-muted">
                            ${comment.author} · ${comment.timestamp}
                        </h6>
                        <p class="card-text">${comment.content}</p>
                    </div>
                </div>
            `).join('');

            return `
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title">${post.title}</h2>
                        <h6 class="card-subtitle mb-3 text-muted">
                            <span class="badge bg-secondary">${post.category}</span>
                            · Posted by ${post.author} · ${post.timestamp}
                        </h6>
                        <img src="${post.image}" class="img-fluid rounded mb-3" alt="Post image">
                        <p class="card-text">${post.content}</p>
                        <div class="d-flex gap-3 mb-4">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-thumbs-up me-1"></i>${post.likes} 
                            </button>
                            <button class="btn btn-outline-secondary">
                                <i class="fas fa-comment me-1"></i>${post.comments.length} 
                            </button>
                        </div>
                        <hr>
                        <h4>Comments</h4>
                        <div class="mt-3">
                            <div class="mb-3">
                                <textarea class="form-control" rows="3" placeholder="Write a comment..."></textarea>
                                <button class="btn btn-primary mt-2">Post Comment</button>
                            </div>
                            ${commentsHtml}
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to render posts on main page
        function renderPosts(postsToRender) {
            const container = document.getElementById('postsContainer');
            container.innerHTML = postsToRender.map(post => createPostElement(post)).join('');
        }

        // Function to show post detail
        function showPostDetail(postId) {
            const post = posts.find(p => p.id === postId);
            document.getElementById('forumPage').style.display = 'none';
            document.getElementById('postDetailPage').style.display = 'block';
            document.getElementById('postDetailContent').innerHTML = createPostDetailElement(post);
        }

        // Function to show main forum page
        function showForumPage() {
            document.getElementById('postDetailPage').style.display = 'none';
            document.getElementById('forumPage').style.display = 'block';
        }

        // Filter and sort posts
        function filterAndSortPosts() {
            const category = document.getElementById('categoryFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            let filteredPosts = [...posts];

            if (category !== 'all') {
                filteredPosts = filteredPosts.filter(post => post.category === category);
            }

            filteredPosts.sort((a, b) => {
                if (sortBy === 'newest') return b.id - a.id;
                if (sortBy === 'popular') return b.likes - a.likes;
                return b.comments.length - a.comments.length;
            });

            document.getElementById('noResults').style.display =
                filteredPosts.length === 0 ? 'block' : 'none';

            renderPosts(filteredPosts);
        }

        // Handle form submission
        document.getElementById('createPostForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const newPost = {
                id: posts.length + 1,
                title: document.getElementById('postTitle').value,
                category: document.getElementById('postCategory').value,
                content: document.getElementById('postContent').value,
                author: "Current User",
                timestamp: "Just now",
                likes: 0,
                comments: [],
                image: "/api/placeholder/400/200"
            };

            posts.unshift(newPost);
            filterAndSortPosts();

            const modal = bootstrap.Modal.getInstance(document.getElementById('createPostModal'));
            modal.hide();
            e.target.reset();
        });



        // Add event listeners for filters
        document.getElementById('categoryFilter').addEventListener('change', filterAndSortPosts);
        document.getElementById('sortBy').addEventListener('change', filterAndSortPosts);

        // Initial render
        renderPosts(posts);
    </script>

</body>

</html>